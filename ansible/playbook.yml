---

- name: Set up DigitalOcean infrastructure
  hosts: local
  roles:
    - role: setup-infra
      tags:
        - personal

- name: Set up pre-prequisites
  hosts: local
  roles:
    - role: prepare-local
      tags:
        - backup
        - personal

- name: Set up services on bzweek
  hosts: bzweek-root
  vars_files:
          - config.yml
  roles:
    - role: setup-firefly
      tags:
        - personal
    - role: setup-ainv
      tags:
        - asslpl
    - role: setup-nginx
      tags:
        - personal
    - role: coopdevs.certbot_nginx
      vars:
        domain_name: bzweek.taptappers.club
        letsencrypt_email: rounakdatta12@gmail.com
        certbot_force_update: false
      tags:
        - personal
